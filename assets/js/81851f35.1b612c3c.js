"use strict";(self.webpackChunkgetstart=self.webpackChunkgetstart||[]).push([[92],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>d});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},x=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(r),x=o,d=u["".concat(s,".").concat(x)]||u[x]||m[x]||a;return r?n.createElement(d,l(l({ref:t},p),{},{components:r})):n.createElement(d,l({ref:t},p))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,l=new Array(a);l[0]=x;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:o,l[1]=i;for(var c=2;c<a;c++)l[c]=r[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}x.displayName="MDXCreateElement"},7562:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var n=r(7462),o=(r(7294),r(3905));const a={title:"Install K3s On Lxc",sidebar_label:"Install K3s on Lxc",sidebar_position:3,keywords:["k3s"],tags:["lxc","ubuntu","k3s","proxmox"]},l=void 0,i={unversionedId:"proxmox/lxc/install-k3s-on-lxc",id:"proxmox/lxc/install-k3s-on-lxc",title:"Install K3s On Lxc",description:"Proxmox Configuration",source:"@site/docs/proxmox/lxc/install-k3s-on-lxc.md",sourceDirName:"proxmox/lxc",slug:"/proxmox/lxc/install-k3s-on-lxc",permalink:"/getstart/proxmox/lxc/install-k3s-on-lxc",draft:!1,tags:[{label:"lxc",permalink:"/getstart/tags/lxc"},{label:"ubuntu",permalink:"/getstart/tags/ubuntu"},{label:"k3s",permalink:"/getstart/tags/k-3-s"},{label:"proxmox",permalink:"/getstart/tags/proxmox"}],version:"current",lastUpdatedBy:"imoize",lastUpdatedAt:1691211684,formattedLastUpdatedAt:"Aug 5, 2023",sidebarPosition:3,frontMatter:{title:"Install K3s On Lxc",sidebar_label:"Install K3s on Lxc",sidebar_position:3,keywords:["k3s"],tags:["lxc","ubuntu","k3s","proxmox"]},sidebar:"tutorialSidebar",previous:{title:"Install Docker on LXC",permalink:"/getstart/proxmox/lxc/install-docker-on-lxc"},next:{title:"Windows 11 iGPU Passthrough",permalink:"/getstart/proxmox/virtual-machine/proxmox-igpu-passthrough"}},s={},c=[{value:"Proxmox Configuration",id:"proxmox-configuration",level:3},{value:"Container Configuration",id:"container-configuration",level:3}],p={toc:c},u="wrapper";function m(e){let{components:t,...r}=e;return(0,o.kt)(u,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h3",{id:"proxmox-configuration"},"Proxmox Configuration"),(0,o.kt)("p",null,"Now, we need to tweak a few things under-the-hood to give our containers proper permissions. You\u2019ll need to SSH into your Proxmox host as the root user to run these commands."),(0,o.kt)("p",null,"In the /etc/pve/lxc directory, you\u2019ll find files called XXX.conf, where XXX are the ID numbers of the containers we just created. Using your text editor of choice, edit the files for the containers we created to add the following lines:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-conf"},'lxc.apparmor.profile: unconfined\nlxc.cgroup.devices.allow: a\nlxc.cap.drop:\nlxc.mount.auto: "proc:rw sys:rw"\n')),(0,o.kt)("admonition",{title:"Note!",type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"It\u2019s important that the container is stopped when you try to edit the file, otherwise Proxmox\u2019s network filesystem will prevent you from saving it.")),(0,o.kt)("h3",{id:"container-configuration"},"Container Configuration"),(0,o.kt)("p",null,"Simply download ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/imoize/boilerplates/blob/master/proxmox/lxc/k3s-lxc.md"},"this script")," from my repo for easiest setup k3s this will also install necessery dependencies and also install helm."),(0,o.kt)("p",null,"To grab the script run this following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"wget -qO k3s-lxc.sh https://raw.githubusercontent.com/imoize/boilerplates/master/proxmox/lxc/scripts/k3s-lxc.sh\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"chmod +x k3s-lxc.sh\n./k3s-lxc.sh\n")))}m.isMDXComponent=!0}}]);